<!DOCTYPE HTML>
<!--
	Read Only by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Fixed and Floating point computer arithmetic</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body>


<!-- Header -->
			<section id="header">
				<header>
					<span class="image avatar"><img src="images/avatar-n.jpg" alt="" /></span>
					<h1 id="logo"><a href="index.html">Prakhar Sharma</a></h1>
					<p>This webpage puts together my experience, work, hobbies<br />
					and stuff I find interesting</p>
				</header>
				<nav id="nav">
					<ul>
						<li><a href="#one" class="active">About</a></li>
						<li><a href="#two">Resources</a></li>
						<!--i><a href="resources.html">Resources</a></li-->
						<li><a href="resume.pdf">Resume</a></li>
						<li><a href="identity-index.html">Contact</a></li>
					</ul>
				</nav>
				<footer>
					<ul class="icons">
						
						<li><a href="https://sg.linkedin.com/in/prakharsharma1" class="icon fa-linkedin"><span class="label">LinkedIn</span></a></li>
						<li><a href="https://github.com/sharmaprakhar" class="icon fa-github"><span class="label">Github</span></a></li>
						<li><a href="#" class="icon fa-envelope"><span class="label">Email</span></a></li>
					</ul>
				</footer>
			</section>


		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">

						<!-- One -->
							<section id="one">
								
							</section>

						

						<!-- Three -->
							<section id="three">
								<div class="container">
									<h3 align="center">A fixed point arithmetic approach to floating point image processing algorithms</h3></br>
									<!-- WRITE YOUR POST HERE-->
									


									<p>Image processing involves complicated mathematics operations so as a natural consequence, almost all standard data structures for image handling store pixel values as float variables. The c++ opencv library implements iplimage structure to store an image array (now replaced by the mat structure). An important operation in image processing is the 2d convolution. Smoothing of images is achieved by convolving images with a gaussian filter(a kernel whose values are generated by the gaussian function). The kernel values, generated by this complicated function, are float values with 6 trailing digits after the decimal in the c++ convention. <br/><br/> 
									
									Floating point arithmetic is considerably slower than fixed point arithmetic. Also, fixed point arithmetic is fairly tractable while dealing with reconfigurable platforms as design with floating point libraries can get pretty complex pretty soon. There are some facts related to fixed point arithmetic which can come in handy while carrying out basic mathematical operations. To add, just align the decimal point and add. To multiply, the implementation can consist of just consequent shift and add operations. If you want to multiply or divide a fixed number by a power of 2, you just have to left or right shift the decimal point respectively. Floating point on the other hand consists of three basic entities called the sign, the exponent, and the mantissa. In C++, you can convert a float number to fixed via two major ways - a)casting a floating point data type as int and b)casting a floating point data type to int and shifting left by a certain number of binary digits (using the operator <<)<br/><br/> 
									
									Both ways would yield different results in further mathematical calculations. The second method provides the luxury of choosing a desired decimal precision; e.g. if you want to have 4 digits after the decimal point, just shift your (int) casted float number by 4 digits to the left, carry out the mathematical operations and shift the number to the right by four digits again. If these concepts seem foreign, consult any of the online resources available on fixed point arithmetic for computers. A good starting point would be stackoverflow.<br/><br/> 
									
																		
									A popular image superpixel segmentation <a href="http://cs.brown.edu/~pff/segment/">algorithm</a> "Efficient graph based Image segmentation" was proposed by P. Felzenszwalb. The algorithm works on the principle of hierarchical clustering and region growing. The algorithm first smoothes the image and then forms disjoint set forests with weighted edges. The weights are the Euclidian distances in terms of intensities of the neighborhood of the disjoint set forests. This functions output is also floating point. A sorting on the weights is carried out and The algorithm then invokes union find to grow regions on that sorted list of weights. This is a sample output when the algorithm is implemented in floating point data type...<br />While implemented in fixed point (details in the code provided), the result of the segmentation for a typical urban scene are:<br/><br/>
									
									<center><img src="fixedFloatRs/road1.JPG" style="width:320px;height:240px;"></center><br/><br/>
									<center><img src="fixedFloatRs/r1fix.JPG" style="width:320px;height:240px;"><img src="fixedFloatRs/r1flt.JPG" style="width:320px;height:240px;"></center><br/><br/>
									
									The first image to the left goes through the algorithm implemented in fixed point arithmetic, using the C++ techniques explained above. The second one through a floating point implementation. Visually, these images are not very different. Especially combined with a later stage contextual analysis using bayesian graphical models, it seems the two implementations would work almost the same (more on this in a later post). Let's look at a different image.<br/><br/>
									
									<center><img src="fixedFloatRs/road2.jpg" style="width:320px;height:240px;"></center><br/><br/>
									<center><img src="fixedFloatRs/r2fix.JPG" style="width:320px;height:240px;"><img src="fixedFloatRs/r2flt.JPG" style="width:320px;height:240px;"></center><br/><br/>
									
									As far as visual inspection goes, these are also similar. Let's dig a little deeper and see what the numbers compare in the two Implementations. The floating point implementation yields.... Clusters while the fixed point yields..... Clusters. The maximum size of the cluster in the former is.... And the latter is.... <br />
									
									Memory efficient algorithms can be designed when these facts are taken into consideration. The opencv library stores the mat structure as a three dimensional array. While this strategy could work on a general purpose architecture without considerable storage constraints, there are several problems. The bigger the memory used, slower the system, even if the processing is super fast e.g. An i7 processor. Moving the data to and fro consumes energy and hence power. Efficient architectural techniques combined with memory constrained algorithm design could solve these problems. Utilizing a fixed point implementation could form a part of that solution. Especially in scenarios like urban scene segmentation where a certain region of the image is of utmost importance (road for traversability). Another design trick that could be employed while designing hardware is to implement stream based design. Instead of storing intermediate results, they could be streamed to be computed upon. This would reduce storage and compute power required. <br/><br/>
									
									Traditional computer vision algorithms still consume lesser compute resources and storage space than the state of the art deep CNNs. The storage required for deep CNNs is in the order of several hundreds of megabytes. In such situations, to ensure relatively low power consumption, one has to attack the system design problem from all three major perspectives - algorithm, architecture and circuit design. Techniques discussed in this post could be employed to cut down on resources and make the even shrinking cnns even smaller to achieve the Holy grail of Neuromorphic architecture design - on Chip learning.</p>

									
									  
															
									<!-- END YOUR POST HERE-->
									</br></br></br><p align="center">Image segmentation, semantic segmentation, fixed point arithmetic, floating point, computer architecture</p>
								</div>
							</section>

					</div>

				
					

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollzer.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>
